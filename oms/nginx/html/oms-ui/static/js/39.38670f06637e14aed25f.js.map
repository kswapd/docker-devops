{"version":3,"sources":["webpack:///src/components/alarm/list.vue","webpack:///./src/components/alarm/list.vue?84b1","webpack:///./src/components/alarm/list.vue"],"names":["list","data","currentPage","total","that","this","loading","unfinishedCount","alarmForm","dateTime","alarmInfo","isGuangzhou","statusVisible","statusForm","computed","extends_default","Object","vuex_esm","objectType","state","alarm","LevelLogData","timeHorizon","length","alarm_date_start_ts","Date","getTime","alarm_date_end_ts","activated","primaryAlarm","vm","getPagesData","search","methods","handleCurrentChange","val","_this","$axios","get","Api","alarmGetUnfinishedCount","then","res","catch","error","$message","message","title","_this2","query","assign_default","page","per_page","alarmListTotal","params","success","JSON","parse","stringify_default","count","handleView","value","_this3","uri","box","map_default","a","$router","push","name","traceId","undefined","console","log","type","handleStatus","row","id","resolve_flag","resolve_comment","saveStatus","_this4","post","alarmUpdateAlarmLog","cancel","$refs","resetFields","deleteItem","_this5","conmmonMethods","makePopBox","delete","alarmListDelete","code","filters","timeHandle","$moment","trunc_default","format","alarm_list","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","$route","meta","attrs","model","label-width","label-position","size","gutter","xl","lg","label","$t","placeholder","maxlength","clearable","callback","$$v","$set","trim","expression","range-separator","start-placeholder","end-placeholder","_l","item","key","icon","on","click","$event","staticStyle","margin-bottom","_e","directives","rawName","stripe","prop","align","width","scopedSlots","_u","fn","props","_f","moType","level_id","min-width","show-overflow-tooltip","alarm_message","alarm_date_timestamp","fixed","trigger","slot","current-page","page-size","layout","background","current-change","visible","center","update:visible","close","ref","span","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/39.38670f06637e14aed25f.js","sourcesContent":["<template>\n<!-- 告警策略 -->\n  <div class=\"alarm-list\">\n    <div class=\"button-group\">\n      <span class=\"route-name\">{{$route.meta.title}}</span>\n    </div>\n    <el-form :model=\"alarmForm\" label-width=\"68px\" label-position=\"right\" size=\"small\">\n      <el-row class=\"label-first\" :gutter=\"20\">\n        <el-col :xl=\"4\" :lg=\"6\">\n          <el-form-item :label=\"$t('zipkin.key')+'：'\">\n            <el-input v-model.trim=\"alarmForm.key\" placeholder=\"请输入1-50位字符\" maxlength=\"50\" clearable></el-input>\n          </el-form-item>\n        </el-col>\n        <el-col :xl=\"8\" :lg=\"10\">\n          <el-form-item :label=\"$t('common.date')+'：'\">\n            <el-date-picker\n              v-model=\"dateTime\"\n              type=\"datetimerange\"\n              range-separator=\"-\"\n              :start-placeholder=\"$t('common.startDate')\"\n              :end-placeholder=\"$t('common.endDate')\">\n            </el-date-picker>\n          </el-form-item>\n        </el-col>\n        <el-col :xl=\"4\" :lg=\"6\">\n          <el-form-item :label=\"$t('alarm.level')+'：'\">\n            <el-select v-model=\"alarmForm.level_id\" clearable>\n              <el-option v-for=\"item in LevelLogData\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\"></el-option>\n            </el-select>\n          </el-form-item>\n        </el-col>\n        <el-col :xl=\"2\" :lg=\"2\">\n          <el-button size=\"small\" type=\"primary\" icon=\"el-icon-search\" @click=\"search('search')\">{{$t('common.search')}}</el-button>\n        </el-col>\n      </el-row>\n    </el-form>\n    <el-row style=\"margin-bottom: 10px;\" v-if=\"isGuangzhou\" key=\"unfinishedCountBox\">\n      <el-col>\n        <span>待处理告警(条)：</span><span class=\"alarmTextColor\">{{unfinishedCount || '暂无数据'}}</span>\n      </el-col>\n    </el-row>\n    <!-- 表格数据 -->\n    <el-table :data=\"alarmInfo\" v-loading=\"loading\" stripe>\n      <el-table-column\n        prop=\"moType\"\n        align=\"center\"\n        width=\"160\"\n        :label=\"$t('alarm.moType')\">\n        <template slot-scope=\"props\">\n          {{props.row.moType | filterCommonMoType(objectType,'value')}}\n        </template>\n      </el-table-column>\n      <el-table-column\n        prop=\"metric\"\n        align=\"center\"\n        width=\"160\"\n        :label=\"$t('alarm.metric')\">\n      </el-table-column>\n      <el-table-column\n        prop=\"moLocator\"\n        align=\"center\"\n        width=\"160\"\n        :label=\"$t('alarm.moLocator')\">\n      </el-table-column>\n      <el-table-column\n        align=\"center\"\n        width=\"90\"\n        :label=\"$t('alarm.level')\">\n        <template slot-scope=\"props\">\n          {{props.row.level_id  | filterCommonMoType(LevelLogData,'id')}}\n        </template>\n      </el-table-column>\n      <el-table-column\n        align=\"center\"\n        min-width=\"200\"\n        show-overflow-tooltip\n        :label=\"$t('alarm.alarm_message')\">\n        <template slot-scope=\"props\">\n          {{props.row.alarm_message}}\n        </template>\n      </el-table-column>\n      <el-table-column\n        align=\"center\"\n        width=\"200\"\n        :label=\"$t('common.date')\">\n        <template slot-scope=\"props\">\n          {{props.row.alarm_date_timestamp | timeHandle(that)}}\n        </template>\n      </el-table-column>\n      <el-table-column\n        v-if=\"isGuangzhou\"\n        key=\"resolve_flag\"\n        align=\"center\"\n        width=\"90\"\n        :label=\"'解决状态'\">\n        <template slot-scope=\"props\">\n          <el-tag v-if=\"props.row.resolve_flag === true\" key=\"resolve_flag_yes\" type=\"success\" size=\"small\">已解决</el-tag>\n          <el-tag v-else key=\"resolve_flag_no\" type=\"danger\" size=\"small\">未解决</el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column\n        v-if=\"isGuangzhou\"\n        key=\"resolve_comment\"\n        align=\"center\"\n        show-overflow-tooltip\n        prop=\"resolve_comment\"\n        width=\"200\"\n        :label=\"'原因'\">\n      </el-table-column>\n      <el-table-column\n        width=\"100\"\n        align=\"center\"\n        fixed=\"right\"\n        :label=\"$t('common.operation')\">\n        <template slot-scope=\"props\">\n          <el-dropdown trigger=\"click\">\n            <el-button type=\"text\" size=\"mini\">操作\n              <i class=\"el-icon-arrow-down el-icon--right\"></i>\n            </el-button>\n            <el-dropdown-menu slot=\"dropdown\">\n              <!-- <el-dropdown-item>\n                <el-button type=\"text\" size=\"mini\" icon=\"fa fa-sign-in\" @click=\"handleView(props.row)\">{{$t('common.view')}}</el-button>\n              </el-dropdown-item> -->\n              <el-dropdown-item v-if=\"isGuangzhou\" key=\"isHandleStatus\">\n                <el-button type=\"text\" size=\"mini\" icon=\"fa fa-pencil-square-o\" @click=\"handleStatus(props.row)\">编辑状态</el-button>\n              </el-dropdown-item>\n              <el-dropdown-item>\n                <el-button type=\"text\" size=\"mini\" icon=\"fa fa-trash\" class=\"btn-text-red\" @click=\"deleteItem(props.row.id)\">{{$t('common.delete')}}</el-button>\n              </el-dropdown-item>\n            </el-dropdown-menu>\n          </el-dropdown>\n        </template>\n      </el-table-column>\n    </el-table>\n    <!-- 翻页部分 -->\n    <div class=\"block\">\n      <el-pagination\n        @current-change=\"handleCurrentChange\"\n        :current-page=\"currentPage\"\n        :page-size=\"10\"\n        layout=\"total, prev, pager, next, jumper\"\n        background\n        :total=\"total\">\n      </el-pagination>\n    </div>\n    <!-- status弹出框 -->\n    <el-dialog\n      :title=\"'编辑状态'\"\n      :visible.sync=\"statusVisible\"\n      width=\"50%\"\n      @close=\"cancel('statusForm')\"\n      center>\n      <el-form :model=\"statusForm\" @close=\"cancel()\" ref=\"statusForm\" label-width=\"104px\" size=\"small\">\n        <el-row>\n          <el-col :span=\"24\">\n            <el-form-item label=\"解决状态：\">\n              <el-radio-group v-model=\"statusForm.resolve_flag\">\n                <el-radio :label=\"true\">已解决</el-radio>\n                <el-radio :label=\"false\">未解决</el-radio>\n              </el-radio-group>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item :label=\"'原因：'\">\n              <el-input v-model.trim=\"statusForm.resolve_comment\" type=\"textarea\" placeholder=\"请输入1-100位字符\" maxlength=\"100\"></el-input>\n            </el-form-item>\n          </el-col>\n        </el-row>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"saveStatus('statusForm')\" size=\"small\">{{ $t('common.ok') }}</el-button>\n        <el-button @click=\"cancel('statusForm')\" size=\"small\">{{ $t('common.cancel') }}</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n  import {mapState, mapActions} from 'vuex'\n  import Api from '@/constants/Api.js'\n  export default {\n    data() {\n      return {\n        currentPage: 1, // 当前页数\n        total: 0, // 总条目数\n        that: this,\n        loading: false,\n        unfinishedCount: null,\n        alarmForm: {},\n        dateTime: null,\n        alarmInfo: [],\n        isGuangzhou: false, // 广州功能控制\n        statusVisible: false,\n        statusForm: {}\n      }\n    },\n    computed: {\n      ...mapState({\n        objectType: state => state.alarm.objectType,\n        LevelLogData: state => state.alarm.LevelLogData\n      }),\n      timeHorizon() {\n        if (this.dateTime) {\n          if (this.dateTime.length > 0) {\n            let ck = {\n              'alarm_date_start_ts': new Date(this.dateTime[0]).getTime(),\n              'alarm_date_end_ts': new Date(this.dateTime[1]).getTime()\n            }\n            return ck\n          } else {\n            return {}\n          }\n        } else {\n          return {}\n        }\n      }\n    },\n    activated() {\n      if (this.objectType.length <= 0) {\n        const vm = this\n        this.primaryAlarm({vm})\n      }\n      if (this.isGuangzhou) {\n        this.getPagesData()\n      }\n      this.search()\n    },\n    methods: {\n      ...mapActions('alarm', ['primaryAlarm']),\n      // 翻页事件\n      handleCurrentChange(val) {\n        this.currentPage = val\n        this.search()\n      },\n      getPagesData() {\n        this.unfinishedCount = null\n        this.$axios.get(Api.alarmGetUnfinishedCount).then((res) => {\n          this.unfinishedCount = res.data\n        }).catch((error) => {\n          this.unfinishedCount = null\n          this.$message.error(error.data.message || error.message || error)\n        })\n      },\n      search(title) {\n        if (title === 'search') {\n          this.currentPage = 1\n        }\n        this.loading = true\n        let query = Object.assign({\n          page: this.currentPage,\n          per_page: 10\n        }, this.alarmForm, this.timeHorizon)\n        this.$axios.get(Api.alarmListTotal, {\n            params: query\n        }).then((res) => {\n          if (title === 'search') {\n            this.$message.success(`查询成功`)\n          }\n          let data = JSON.parse(JSON.stringify(res.data))\n          this.total = res.count\n          this.alarmInfo = data\n          this.loading = false\n        }).catch((error) => {\n          this.loading = false\n          this.$message.error(error.data.message || error.message || error)\n        })\n      },\n      // 查看\n      handleView(value) {\n        if (value.uri) {\n          let box = new Map([\n            ['alarm', () => {\n              this.$router.push({name: 'detailZipkin', query: {traceId: value}})\n            }],\n            [undefined, () => {\n              console.log(1)\n            }]\n          ])\n          console.log(value.uri)\n          box.get(value.uri)()\n        } else {\n          this.$message({\n            message: '无链接',\n            type: 'warning'\n          })\n        }\n      },\n      // 编辑状态\n      handleStatus(row) {\n        this.statusForm = {\n          id: row.id,\n          resolve_flag: row.resolve_flag,\n          resolve_comment: row.resolve_comment\n        }\n        this.statusVisible = true\n      },\n      // 状态\n      saveStatus() {\n        this.loading = true\n        let query = Object.assign({}, JSON.parse(JSON.stringify(this.statusForm)))\n        this.$axios.post(Api.alarmUpdateAlarmLog, query).then((res) => {\n          this.statusVisible = false\n          this.$message({\n            type: 'success',\n            message: '编辑成功'\n          })\n          this.search()\n        }).catch((error) => {\n          this.loading = false\n          this.$message.error(error.data.message || error.message || error)\n        })\n      },\n      cancel() {\n        this.$refs.statusForm.resetFields()\n        this.statusVisible = false\n      },\n      // 删除\n      deleteItem(id) {\n        this.conmmonMethods.makePopBox(this, '删除该策略？').then(() => {\n          this.loading = true\n          this.$axios.delete(Api.alarmListDelete + id).then((res) => {\n            if (res.code === '0000') {\n              this.search('search')\n            }\n          }).catch((error) => {\n            this.loading = false\n            this.$message.error(error.data.message || error.message || error)\n          })\n        })\n      }\n    },\n    filters: {\n      timeHandle(value, that) {\n        let va = that.$moment(Math.trunc(value)).format('YYYY-MM-DD HH:mm:ss')\n        return va\n      }\n    }\n  }\n</script>\n<style scoped lang=\"scss\" type=\"text/scss\">\n  .alarm-list {\n    .alarmTextColor {\n      line-height: 30px;\n      color: #F56C6C;\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/alarm/list.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"alarm-list\"},[_c('div',{staticClass:\"button-group\"},[_c('span',{staticClass:\"route-name\"},[_vm._v(_vm._s(_vm.$route.meta.title))])]),_vm._v(\" \"),_c('el-form',{attrs:{\"model\":_vm.alarmForm,\"label-width\":\"68px\",\"label-position\":\"right\",\"size\":\"small\"}},[_c('el-row',{staticClass:\"label-first\",attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"xl\":4,\"lg\":6}},[_c('el-form-item',{attrs:{\"label\":_vm.$t('zipkin.key')+'：'}},[_c('el-input',{attrs:{\"placeholder\":\"请输入1-50位字符\",\"maxlength\":\"50\",\"clearable\":\"\"},model:{value:(_vm.alarmForm.key),callback:function ($$v) {_vm.$set(_vm.alarmForm, \"key\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"alarmForm.key\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"xl\":8,\"lg\":10}},[_c('el-form-item',{attrs:{\"label\":_vm.$t('common.date')+'：'}},[_c('el-date-picker',{attrs:{\"type\":\"datetimerange\",\"range-separator\":\"-\",\"start-placeholder\":_vm.$t('common.startDate'),\"end-placeholder\":_vm.$t('common.endDate')},model:{value:(_vm.dateTime),callback:function ($$v) {_vm.dateTime=$$v},expression:\"dateTime\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"xl\":4,\"lg\":6}},[_c('el-form-item',{attrs:{\"label\":_vm.$t('alarm.level')+'：'}},[_c('el-select',{attrs:{\"clearable\":\"\"},model:{value:(_vm.alarmForm.level_id),callback:function ($$v) {_vm.$set(_vm.alarmForm, \"level_id\", $$v)},expression:\"alarmForm.level_id\"}},_vm._l((_vm.LevelLogData),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.id}})}))],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"xl\":2,\"lg\":2}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\",\"icon\":\"el-icon-search\"},on:{\"click\":function($event){_vm.search('search')}}},[_vm._v(_vm._s(_vm.$t('common.search')))])],1)],1)],1),_vm._v(\" \"),(_vm.isGuangzhou)?_c('el-row',{key:\"unfinishedCountBox\",staticStyle:{\"margin-bottom\":\"10px\"}},[_c('el-col',[_c('span',[_vm._v(\"待处理告警(条)：\")]),_c('span',{staticClass:\"alarmTextColor\"},[_vm._v(_vm._s(_vm.unfinishedCount || '暂无数据'))])])],1):_vm._e(),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],attrs:{\"data\":_vm.alarmInfo,\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"moType\",\"align\":\"center\",\"width\":\"160\",\"label\":_vm.$t('alarm.moType')},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_vm._v(\"\\n          \"+_vm._s(_vm._f(\"filterCommonMoType\")(props.row.moType,_vm.objectType,'value'))+\"\\n        \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"metric\",\"align\":\"center\",\"width\":\"160\",\"label\":_vm.$t('alarm.metric')}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"moLocator\",\"align\":\"center\",\"width\":\"160\",\"label\":_vm.$t('alarm.moLocator')}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"width\":\"90\",\"label\":_vm.$t('alarm.level')},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_vm._v(\"\\n          \"+_vm._s(_vm._f(\"filterCommonMoType\")(props.row.level_id,_vm.LevelLogData,'id'))+\"\\n        \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"min-width\":\"200\",\"show-overflow-tooltip\":\"\",\"label\":_vm.$t('alarm.alarm_message')},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_vm._v(\"\\n          \"+_vm._s(props.row.alarm_message)+\"\\n        \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"width\":\"200\",\"label\":_vm.$t('common.date')},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_vm._v(\"\\n          \"+_vm._s(_vm._f(\"timeHandle\")(props.row.alarm_date_timestamp,_vm.that))+\"\\n        \")]}}])}),_vm._v(\" \"),(_vm.isGuangzhou)?_c('el-table-column',{key:\"resolve_flag\",attrs:{\"align\":\"center\",\"width\":\"90\",\"label\":'解决状态'},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [(props.row.resolve_flag === true)?_c('el-tag',{key:\"resolve_flag_yes\",attrs:{\"type\":\"success\",\"size\":\"small\"}},[_vm._v(\"已解决\")]):_c('el-tag',{key:\"resolve_flag_no\",attrs:{\"type\":\"danger\",\"size\":\"small\"}},[_vm._v(\"未解决\")])]}}])}):_vm._e(),_vm._v(\" \"),(_vm.isGuangzhou)?_c('el-table-column',{key:\"resolve_comment\",attrs:{\"align\":\"center\",\"show-overflow-tooltip\":\"\",\"prop\":\"resolve_comment\",\"width\":\"200\",\"label\":'原因'}}):_vm._e(),_vm._v(\" \"),_c('el-table-column',{attrs:{\"width\":\"100\",\"align\":\"center\",\"fixed\":\"right\",\"label\":_vm.$t('common.operation')},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_c('el-dropdown',{attrs:{\"trigger\":\"click\"}},[_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\"}},[_vm._v(\"操作\\n              \"),_c('i',{staticClass:\"el-icon-arrow-down el-icon--right\"})]),_vm._v(\" \"),_c('el-dropdown-menu',{attrs:{\"slot\":\"dropdown\"},slot:\"dropdown\"},[(_vm.isGuangzhou)?_c('el-dropdown-item',{key:\"isHandleStatus\"},[_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\",\"icon\":\"fa fa-pencil-square-o\"},on:{\"click\":function($event){_vm.handleStatus(props.row)}}},[_vm._v(\"编辑状态\")])],1):_vm._e(),_vm._v(\" \"),_c('el-dropdown-item',[_c('el-button',{staticClass:\"btn-text-red\",attrs:{\"type\":\"text\",\"size\":\"mini\",\"icon\":\"fa fa-trash\"},on:{\"click\":function($event){_vm.deleteItem(props.row.id)}}},[_vm._v(_vm._s(_vm.$t('common.delete')))])],1)],1)],1)]}}])})],1),_vm._v(\" \"),_c('div',{staticClass:\"block\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.currentPage,\"page-size\":10,\"layout\":\"total, prev, pager, next, jumper\",\"background\":\"\",\"total\":_vm.total},on:{\"current-change\":_vm.handleCurrentChange}})],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":'编辑状态',\"visible\":_vm.statusVisible,\"width\":\"50%\",\"center\":\"\"},on:{\"update:visible\":function($event){_vm.statusVisible=$event},\"close\":function($event){_vm.cancel('statusForm')}}},[_c('el-form',{ref:\"statusForm\",attrs:{\"model\":_vm.statusForm,\"label-width\":\"104px\",\"size\":\"small\"},on:{\"close\":function($event){_vm.cancel()}}},[_c('el-row',[_c('el-col',{attrs:{\"span\":24}},[_c('el-form-item',{attrs:{\"label\":\"解决状态：\"}},[_c('el-radio-group',{model:{value:(_vm.statusForm.resolve_flag),callback:function ($$v) {_vm.$set(_vm.statusForm, \"resolve_flag\", $$v)},expression:\"statusForm.resolve_flag\"}},[_c('el-radio',{attrs:{\"label\":true}},[_vm._v(\"已解决\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":false}},[_vm._v(\"未解决\")])],1)],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":24}},[_c('el-form-item',{attrs:{\"label\":'原因：'}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"placeholder\":\"请输入1-100位字符\",\"maxlength\":\"100\"},model:{value:(_vm.statusForm.resolve_comment),callback:function ($$v) {_vm.$set(_vm.statusForm, \"resolve_comment\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"statusForm.resolve_comment\"}})],1)],1)],1)],1),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){_vm.saveStatus('statusForm')}}},[_vm._v(_vm._s(_vm.$t('common.ok')))]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.cancel('statusForm')}}},[_vm._v(_vm._s(_vm.$t('common.cancel')))])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-40303766\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/alarm/list.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-40303766\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./list.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./list.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./list.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-40303766\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./list.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-40303766\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/alarm/list.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}