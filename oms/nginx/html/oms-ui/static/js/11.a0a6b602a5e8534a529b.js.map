{"version":3,"sources":["webpack:///src/components/zipkin/zipkinEcharts.vue","webpack:///./src/components/zipkin/zipkinEcharts.vue?3095","webpack:///./src/components/zipkin/zipkinEcharts.vue"],"names":["zipkinEcharts","name","data","loading","detailData","zipkinFrom","dateTime","Date","getTime","computed","timeHorizon","this","length","startTime","endTime","mounted","methods","analysis","getData","$message","message","type","_ref","_this","$axios","get","Api","spanDuration","params","then","links","catch","error","filters","successRate","value","callNumber","successNumber","trunc_default","zipkinNameFilter","index","lastIndexOf","slice","zipkin_zipkinEcharts","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","$route","meta","title","staticStyle","width","height","ref","attrs","model","label-width","label-position","size","gutter","xl","lg","label","range-separator","start-placeholder","end-placeholder","callback","$$v","$set","expression","on","click","$t","directives","rawName","stripe","align","min-width","prop","scopedSlots","_u","key","fn","props","row","spanName","Math","trunc","avgDuration","maxDuration","minDuration","_f","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/11.a0a6b602a5e8534a529b.js","sourcesContent":["<template>\n <div class=\"zipkinEcharts\">\n     <div class=\"button-group\">\n        <span class=\"route-name\">{{$route.meta.title}}</span>\n    </div>\n     <div class=\"header\" style=\"width:100%;height:100%\">\n        <el-form ref=\"zipkinFrom\" :model=\"zipkinFrom\" label-width=\"82px\" label-position=\"left\" size=\"small\">\n            <el-row :gutter=\"12\">\n                <el-col :xl=\"8\" :lg=\"12\">\n                    <el-form-item label=\"时间范围：\">\n                        <el-date-picker\n                        v-model=\"zipkinFrom.dateTime\"\n                        type=\"datetimerange\"\n                        range-separator=\"-\"\n                        start-placeholder=\"开始日期\"\n                        end-placeholder=\"结束日期\">\n                        </el-date-picker>\n                    </el-form-item>\n                </el-col>\n                <el-col :xl=\"4\" :lg=\"6\">\n                    <el-button type=\"primary\" size=\"small\" @click=\"analysis\">{{$t('common.search')}}</el-button>\n                </el-col>\n            </el-row>\n        </el-form>\n    </div>\n    <div>\n        <!-- 表格部分 -->\n        <el-table\n            stripe\n            v-loading=\"loading\"\n            :data=\"detailData\"\n            size=\"small\"\n            ref=\"multipleTable\"\n            style=\"width: 100%\">\n            <el-table-column\n                align=\"center\"\n                min-width=\"240\"\n                prop=\"name\"\n                :label=\"'服务名'\">\n                <template slot-scope=\"props\">\n                    {{props.row.spanName}}\n                </template>\n            </el-table-column>\n            <el-table-column\n                align=\"center\"\n                width=\"130\"\n                prop=\"avgDuration\"\n                :label=\"'平均响应时间(ms)'\">\n                <template slot-scope=\"props\">\n                    {{(Math.trunc(props.row.avgDuration))/1000}}\n                </template>\n            </el-table-column>\n            <el-table-column\n                align=\"center\"\n                width=\"130\"\n                prop=\"maxDuration\"\n                :label=\"'最大响应时间(ms)'\">\n                <template slot-scope=\"props\">\n                    {{(Math.trunc(props.row.maxDuration))/1000}}\n                </template>\n            </el-table-column>\n            <el-table-column\n                align=\"center\"\n                width=\"130\"\n                prop=\"minDuration\"\n                :label=\"'最小响应时间(ms)'\">\n                <template slot-scope=\"props\">\n                    {{(Math.trunc(props.row.minDuration))/1000}}\n                </template>\n            </el-table-column>\n            <el-table-column\n                align=\"center\"\n                width=\"130\"\n                :label=\"'成功率'\">\n                <template slot-scope=\"props\">\n                    {{ props.row | successRate(value)}}\n                </template>\n            </el-table-column>\n            <el-table-column\n                align=\"center\"\n                width=\"130\"\n                prop=\"callNumber\"\n                :label=\"'调用次数'\">\n            </el-table-column>\n        </el-table>\n    </div>\n </div>\n</template>\n\n<script type=\"text/ecmascript-6\">\nimport Api from '@/constants/Api.js'\nexport default {\n    name: 'zipkinEcharts',\n    data() {\n        return {\n            loading: false,\n            detailData: [],\n            zipkinFrom: {\n                dateTime: [new Date().getTime() - 86400000, new Date()]\n            }\n        }\n    },\n    computed: {\n        timeHorizon() {\n            if (this.zipkinFrom.dateTime) {\n                if (this.zipkinFrom.dateTime.length > 0) {\n                    let ck = {\n                        'startTime': new Date(this.zipkinFrom.dateTime[0]).getTime(),\n                        'endTime': new Date(this.zipkinFrom.dateTime[1]).getTime()\n                    }\n                    return ck\n                } else {\n                    return null\n                }\n            } else {\n                return null\n            }\n        }\n    },\n    mounted() {\n        // this.analysis()\n    },\n    methods: {\n        analysis() {\n            if (this.timeHorizon) {\n                this.getData(this.timeHorizon)\n            } else {\n                this.$message({\n                    message: '不能为空',\n                    type: 'warning'\n                })\n            }\n        },\n        // 封装数据axios\n        getData({startTime, endTime}) {\n            this.loading = true\n            this.$axios.get(Api.spanDuration, {\n                params: {startTime, endTime}\n            }).then((links) => {\n                this.$message({\n                    message: '查询成功',\n                    type: 'success'\n                })\n                this.detailData = links\n                this.loading = false\n            }).catch((error) => {\n                this.loading = false\n                this.$message.error(error.data.message || error.message || error)\n            })\n        }\n    },\n    filters: {\n        successRate(value) {\n            if (value.callNumber && value.successNumber) {\n                return (Math.trunc((value.successNumber / value.callNumber) * 1000)) / 10 + '%'\n            } else {\n                return '0%'\n            }\n        },\n        zipkinNameFilter(value) {\n            if (value && value.length > 0) {\n                let index = value.lastIndexOf('.')\n                if (index !== -1) {\n                    return value.slice(0, index)\n                } else {\n                    return value\n                }\n            } else {\n                return value\n            }\n        }\n    }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.zipkinEcharts{\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/zipkin/zipkinEcharts.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"zipkinEcharts\"},[_c('div',{staticClass:\"button-group\"},[_c('span',{staticClass:\"route-name\"},[_vm._v(_vm._s(_vm.$route.meta.title))])]),_vm._v(\" \"),_c('div',{staticClass:\"header\",staticStyle:{\"width\":\"100%\",\"height\":\"100%\"}},[_c('el-form',{ref:\"zipkinFrom\",attrs:{\"model\":_vm.zipkinFrom,\"label-width\":\"82px\",\"label-position\":\"left\",\"size\":\"small\"}},[_c('el-row',{attrs:{\"gutter\":12}},[_c('el-col',{attrs:{\"xl\":8,\"lg\":12}},[_c('el-form-item',{attrs:{\"label\":\"时间范围：\"}},[_c('el-date-picker',{attrs:{\"type\":\"datetimerange\",\"range-separator\":\"-\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\"},model:{value:(_vm.zipkinFrom.dateTime),callback:function ($$v) {_vm.$set(_vm.zipkinFrom, \"dateTime\", $$v)},expression:\"zipkinFrom.dateTime\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"xl\":4,\"lg\":6}},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.analysis}},[_vm._v(_vm._s(_vm.$t('common.search')))])],1)],1)],1)],1),_vm._v(\" \"),_c('div',[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],ref:\"multipleTable\",staticStyle:{\"width\":\"100%\"},attrs:{\"stripe\":\"\",\"data\":_vm.detailData,\"size\":\"small\"}},[_c('el-table-column',{attrs:{\"align\":\"center\",\"min-width\":\"240\",\"prop\":\"name\",\"label\":'服务名'},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_vm._v(\"\\n                   \"+_vm._s(props.row.spanName)+\"\\n               \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"width\":\"130\",\"prop\":\"avgDuration\",\"label\":'平均响应时间(ms)'},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_vm._v(\"\\n                   \"+_vm._s((Math.trunc(props.row.avgDuration))/1000)+\"\\n               \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"width\":\"130\",\"prop\":\"maxDuration\",\"label\":'最大响应时间(ms)'},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_vm._v(\"\\n                   \"+_vm._s((Math.trunc(props.row.maxDuration))/1000)+\"\\n               \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"width\":\"130\",\"prop\":\"minDuration\",\"label\":'最小响应时间(ms)'},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_vm._v(\"\\n                   \"+_vm._s((Math.trunc(props.row.minDuration))/1000)+\"\\n               \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"width\":\"130\",\"label\":'成功率'},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_vm._v(\"\\n                   \"+_vm._s(_vm._f(\"successRate\")(props.row,_vm.value))+\"\\n               \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"width\":\"130\",\"prop\":\"callNumber\",\"label\":'调用次数'}})],1)],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-e3a52dd4\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/zipkin/zipkinEcharts.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-e3a52dd4\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./zipkinEcharts.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./zipkinEcharts.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./zipkinEcharts.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-e3a52dd4\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./zipkinEcharts.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-e3a52dd4\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/zipkin/zipkinEcharts.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}