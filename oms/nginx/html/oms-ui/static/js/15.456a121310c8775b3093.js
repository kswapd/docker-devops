webpackJsonp([15],{TiDX:function(e,t){},"b+Wm":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("Xxa5"),l=r.n(a),s=r("exGp"),n=r.n(s),o=r("Dd8w"),c=r.n(o),i=r("NYxO"),u=r("ZlkZ"),m={data:function(){return{currentPage:1,pageSize:10,clusterVisible:!1,clusterForm:{name:""},title:"",clusterAlertForm:{},clusterAlertRules:{name:[{required:!0,message:"请输入集群名称",trigger:"blur"}]},tableLoading:!1}},computed:c()({},Object(i.d)({clusterInfo:function(e){return e.zookeeper.clusterInfo}})),created:function(){this.getTableData()},methods:c()({},Object(i.b)("zookeeper",["getClusterList","operationTable"]),{searchCluster:function(){this.getTableData()},getTableData:function(){var e=this;return n()(l.a.mark(function t(){var r,a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={start:(r=e).currentPage,length:r.pageSize},r.clusterForm.name&&(a.name=r.clusterForm.name),r.tableLoading=!0,t.next=6,r.getClusterList(a);case 6:r.tableLoading=!1;case 7:case"end":return t.stop()}},t,e)}))()},deleteCluster:function(e){var t=this;t.$confirm("是否确认删除集群"+e.name+"？","删除",{confirmButtonText:t.$t("common.ok"),cancelButtonText:t.$t("common.cancel"),type:"warning",center:!0}).then(function(){t.currentPage=1,t.operationTable({url:u.a.zkClusterDelete,data:{id:e.id},callback:function(){t.$message({type:"success",message:"删除成功"}),t.currentPage=1,t.getTableData()},callbackError:function(e){t.$message({type:"error",message:e.data&&e.data.message||"删除失败"})}})}).catch(function(){})},modifyCluster:function(e){var t=this;e?(t.title="修改zk集群",t.clusterAlertForm=c()({},e),t.clusterVisible=!0):(t.title="添加zk集群",t.clusterAlertForm={},t.clusterVisible=!0)},handleCurrentChange:function(e){this.currentPage=e,this.getTableData()},clusterCancel:function(){this.clusterVisible=!1,this.$refs.clusterAlertForm.clearValidate()},clusterOk:function(e){var t=this;t.$refs[e].validate(function(e){e&&(t.clusterAlertForm.id?t.operationTable({url:u.a.zkClusterUpdate,data:t.clusterAlertForm,callback:function(){t.$message({type:"success",message:"修改成功"}),t.clusterCancel(),t.getTableData()},callbackError:function(e){t.$message({type:"error",message:e.data&&e.data.message||"修改失败"})}}):t.operationTable({url:u.a.zkClusterAdd,data:t.clusterAlertForm,callback:function(){t.$message({type:"success",message:"添加成功"}),t.clusterCancel(),t.getTableData()},callbackError:function(e){t.$message({type:"error",message:e.data&&e.data.message||"添加失败"})}}))})}})},d={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"zk-main"},[r("div",{staticClass:"button-group"},[r("span",{staticClass:"route-name"},[e._v(e._s(e.$route.meta.title))]),e._v(" "),r("el-button",{attrs:{icon:"el-icon-plus",size:"small",type:"warning"},on:{click:function(t){e.modifyCluster()}}},[e._v(e._s(e.$t("common.add")))])],1),e._v(" "),r("el-form",{ref:"clusterForm",attrs:{model:e.clusterForm,"label-width":"85px","label-position":"right",size:"small"}},[r("el-row",{staticClass:"label-first",attrs:{gutter:20}},[r("el-col",{attrs:{lg:6,xl:4}},[r("el-form-item",{attrs:{label:"集群名称："}},[r("el-input",{model:{value:e.clusterForm.name,callback:function(t){e.$set(e.clusterForm,"name","string"==typeof t?t.trim():t)},expression:"clusterForm.name"}})],1)],1),e._v(" "),r("el-col",{attrs:{lg:6,xl:4}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.searchCluster}},[e._v(e._s(e.$t("common.search")))])],1)],1)],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{data:e.clusterInfo.list,stripe:""}},[r("el-table-column",{attrs:{prop:"name",align:"center",label:"集群名称",width:"300"}}),e._v(" "),r("el-table-column",{attrs:{label:"集群详情",width:"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[r("router-link",{attrs:{to:{name:"zkList",params:e.row}}},[r("i",{staticClass:"fa fa-cubes font-16 pointer"})])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"remark",align:"center",label:"备注"}}),e._v(" "),r("el-table-column",{attrs:{width:"200",align:"center",label:e.$t("common.operation")},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit"},on:{click:function(r){e.modifyCluster(t.row)}}},[e._v(e._s(e.$t("common.modify")))]),e._v(" "),r("el-button",{staticClass:"btn-text-red",attrs:{type:"text",size:"mini",icon:"el-icon-delete"},on:{click:function(r){e.deleteCluster(t.row)}}},[e._v("\n          "+e._s(e.$t("common.delete"))+"\n        ")])]}}])})],1),e._v(" "),r("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,layout:"total, prev, pager, next, jumper",total:e.clusterInfo.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}}),e._v(" "),r("el-dialog",{attrs:{title:e.title,visible:e.clusterVisible,width:"30%",center:""},on:{"update:visible":function(t){e.clusterVisible=t},close:e.clusterCancel}},[r("el-form",{ref:"clusterAlertForm",attrs:{model:e.clusterAlertForm,rules:e.clusterAlertRules,"label-width":"80px",size:"small"}},[r("el-form-item",{attrs:{label:"集群名称",prop:"name"}},[r("el-input",{attrs:{maxlength:"50"},model:{value:e.clusterAlertForm.name,callback:function(t){e.$set(e.clusterAlertForm,"name","string"==typeof t?t.trim():t)},expression:"clusterAlertForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"描述",prop:"remark"}},[r("el-input",{attrs:{type:"textarea",maxlength:"100"},model:{value:e.clusterAlertForm.remark,callback:function(t){e.$set(e.clusterAlertForm,"remark","string"==typeof t?t.trim():t)},expression:"clusterAlertForm.remark"}}),e._v(" "),r("div",{staticClass:"remark-length"},[e._v(e._s(e.clusterAlertForm.remark?e.clusterAlertForm.remark.length:"0")+"/100")])],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.clusterOk("clusterAlertForm")}}},[e._v(e._s(e.$t("common.ok")))]),e._v(" "),r("el-button",{attrs:{size:"small"},on:{click:e.clusterCancel}},[e._v(e._s(e.$t("common.cancel")))])],1)],1)],1)},staticRenderFns:[]};var g=r("VU/8")(m,d,!1,function(e){r("TiDX")},"data-v-be5d674a",null);t.default=g.exports}});
//# sourceMappingURL=15.456a121310c8775b3093.js.map